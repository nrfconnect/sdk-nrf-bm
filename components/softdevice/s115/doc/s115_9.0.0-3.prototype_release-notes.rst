s115_9.0.0-3.prototype
======================

This version is a major release, providing support for nRF54L series devices.

Notes:

- This release has changed the API. This requires changes to applications.
- The release notes list changes since s115_9.0.0-2.prototype.


SoftDevice properties
---------------------

* This SoftDevice variant is compatible with
  nRF54L05, nRF54L10, and nRF54L15.

* The SoftDevice memory requirements for this version are as follows:

  * NVM: **107.0 kB** (0x1AC00 bytes).

  * RAM: **4.9 kB** (0x1380 bytes).
    This is the minimum required memory. The actual requirements depend on the
    configuration chosen at ``sd_ble_enable()`` time.

  * Call stack: The SoftDevice uses a call stack combined with the application.
    The worst-case stack usage for the SoftDevice is
    **1.8 kB**
    (0x700 bytes). Application writers should ensure
    that enough stack space is reserved to cover the worst-case SoftDevice call
    stack usage combined with the worst-case application call stack usage.

* SoftDevice base address:

  * nRF54L05: 0x062000 (``s115_9.0.0-3.prototype_nrf54l05_softdevice.hex``).

  * nRF54L10: 0x0E2000 (``s115_9.0.0-3.prototype_nrf54l10_softdevice.hex``).

  * nRF54L15: 0x162000 (``s115_9.0.0-3.prototype_nrf54l15_softdevice.hex``).

* The Firmware ID of this SoftDevice is 0x3072.

New Features
-------------

* GAP

  * Added support for LE Data Packet Length Extension (DLE).

Changes
-------

* SoftDevice

  * Support for PA/LNA (``BLE_COMMON_OPT_PA_LNA``) has been removed (DRGN-23876).

  * A new API for seeding the random number generator ``sd_rand_seed_set`` has been added (DRGN-25550).

  * The ``sd_radio_notification_cfg_set`` now accepts an uint16_t distance_us parameter instead of enum.
    The valid range is [50, 5500] Âµs. The enums can still be used for backwards compatibility.
    The active notification distance is now from when the SoftDevice prepares to use the radio, and not the
    actual radio activity (DRGN-25879).

* GAP

  * The Device IRK is no longer used as a fallback to generate Resolvable Private Addresses (RPA).
    Applications that want to use RPA need to populate the device identity list (``sd_ble_gap_device_identities_set``).
    Otherwise the identity address will be used (``sd_ble_gap_addr_set``) (DRGN-23358).

  * When privacy is enabled (``sd_ble_gap_privacy_set``) the advertiser will refresh private addresses whenever
    the advertising data or scan response data is changed (``sd_ble_gap_adv_set_configure``) (DRGN-23358).

Limitations
-----------

* SoftDevice

  * If Radio Notifications are enabled, flash write and flash erase operations
    initiated through the SoftDevice API will be notified to the application as
    Radio Events (DRGN-5197).

  * Synthesized low frequency clock source is not tested or intended for use
    with the Bluetooth LE stack.

  * Applications must not modify the SEVONPEND flag in the SCR register when
    running in priority levels higher than 6 (priority level numerical values
    lower than 6) as this can lead to undefined behavior.

  * The SoftDevice may generate several events when connected, based on peer
    actions, meaning without previous action from the application. The
    ``BLE_GAP_EVT_PHY_UPDATE_REQUEST`` event, for instance, is generated when a
    connected peer sends a Phy Update Request, even when an application does not
    include logic to change PHY. There are several such events that may require
    action from an application if they are received. For more information, see the
    ``sd_ble_enable()`` API in SoftDevice.

  * Configuring multiple connection configurations (see ``ble_conn_cfg_t::conn_cfg_tag``) is not supported (DRGN-23839).

* GATT

  * To conform to the Bluetooth Core Specification, there shall be no
    secondary service that is not referenced somehow by a primary service. The
    SoftDevice does not enforce this (DRGN-906).

Known Issues
------------

* SoftDevice

* GAP

  * If the Peer Preferred Connection Parameters Characteristic (PPCP) contains "No
    specific values indication (0xFFFF)", application should not perform a peripheral
    initiated connection parameter update using PPCP. Otherwise invalid values will be
    used in ``L2CAP_CONNECTION_PARAMETER_UPDATE_REQ``. A workaround is to always specify
    the connection parameters in the ``sd_ble_gap_conn_param_update`` call (DRGN-15111).

  * The ``BLE_GAP_EVT_SEC_INFO_REQUEST`` event will not report the identity
    address of the peer to the application. A workaround is to do a mapping of the
    connection handle to the peer's identity address (DRGN-10340).

* GATTC

  * The ``ble_gattc_service_t::uuid`` field is incorrectly populated in the
    ``BLE_GATTC_EVT_PRIM_SRVC_DISC_RSP`` event if
    ``sd_ble_gattc_primary_services_discover()`` or ``sd_ble_gattc_read()`` is
    called when a Primary Service Discovery by Service UUID is already ongoing.
    When the application has called
    ``sd_ble_gattc_primary_services_discover()``, it should wait for the
    ``BLE_GATTC_EVT_PRIM_SRVC_DISC_RSP`` event before calling
    ``sd_ble_gattc_primary_services_discover()`` or ``sd_ble_gattc_read()``
    (DRGN-11300).

* LL

  * If the application adds an all zeroes IRK with the
    ``sd_ble_gap_device_identities_set()``, it will be treated as a valid entry
    in the device identity list. An all zeroes IRK is invalid and must not be
    added (DRGN-9083).
