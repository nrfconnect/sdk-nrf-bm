s115_9.0.0-1.prototype
======================

This version is a major release, providing support for nRF54L series devices.

Notes:

- This release has changed the API. This requires changes to applications.
- The release notes list changes since s112_nrf52_7.2.0.


SoftDevice properties
---------------------

* This SoftDevice variant is compatible with
  nRF54L15.

* The SoftDevice memory requirements for this version are as follows:

  * NVM: **100.0 kB** (0x19000 bytes).

  * RAM: **4.9 kB** (0x1380 bytes).
    This is the minimum required memory. The actual requirements depend on the
    configuration chosen at ``sd_ble_enable()`` time.

  * Call stack: The SoftDevice uses a call stack combined with the application.
    The worst-case stack usage for the SoftDevice is
    **1.8 kB**
    (0x700 bytes). Application writers should ensure
    that enough stack space is reserved to cover the worst-case SoftDevice call
    stack usage combined with the worst-case application call stack usage.

* The Firmware ID of this SoftDevice is 0x30D2.

Changes
-------

* SoftDevice

  * The function ``sd_flash_page_erase`` has been removed for devices that do not
    require page erase before write.

  * The function ``sd_flash_protect`` has been removed.

  * The function ``sd_protected_register_write`` has been removed.

  * The function ``sd_power_pof_thresholdvddh_set`` has been removed.

  * The functions ``sd_power_ram_power_set``, ``sd_power_ram_power_clr``, and
    ``sd_power_ram_power_get`` have been removed.

  * The functions ``sd_power_dcdc_mode_set`` and ``sd_power_dcdc_mode_get`` have
    been removed.

  * The functions ``sd_power_reset_reason_get`` and ``sd_power_reset_reason_clr``
    have been removed.

  * The function ``sd_power_system_off`` has been removed.

  * The functions ``sd_ppi_channel_enable_get``,
    ``sd_ppi_channel_enable_set``, ``sd_ppi_channel_enable_clr``, ``sd_ppi_channel_assign``, ``sd_ppi_group_task_enable``,
    ``sd_ppi_group_task_disable``, ``sd_ppi_group_assign`` and ``sd_ppi_group_get`` have been removed.

Limitations
-----------

* SoftDevice

  * If Radio Notifications are enabled, flash write and flash erase operations
    initiated through the SoftDevice API will be notified to the application as
    Radio Events (DRGN-5197).

  * Synthesized low frequency clock source is not tested or intended for use
    with the Bluetooth LE stack.

  * Applications must not modify the SEVONPEND flag in the SCR register when
    running in priority levels higher than 6 (priority level numerical values
    lower than 6) as this can lead to undefined behavior.

  * The SoftDevice may generate several events when connected, based on peer
    actions, meaning without previous action from the application. The
    ``BLE_GAP_EVT_PHY_UPDATE_REQUEST`` event, for instance, is generated when a
    connected peer sends a Phy Update Request, even when an application does not
    include logic to change PHY. There are several such events that may require
    action from an application if they are received. For more information, see the
    ``sd_ble_enable()`` API in SoftDevice.

  * Configuring multiple connection configurations (see ``ble_conn_cfg_t::conn_cfg_tag``) is not supported (DRGN-23839).

* GATT

  * To conform to the Bluetooth Core Specification, there shall be no
    secondary service that is not referenced somehow by a primary service. The
    SoftDevice does not enforce this (DRGN-906).

Known Issues
------------

* SoftDevice

  * The Radio Notification signal is not yet supported. The function ``sd_radio_notification_cfg_set``
    must not be used (DRGN-24324).

  * The API functions in ``nrf_nvic.h`` that operate on interrupts are not yet supported. This
    includes the functions ``sd_nvic_critical_region_enter`` and ``sd_nvic_critical_region_exit`` (DRGN-23477).

* L2CAP

  * Receiving fragmented L2CAP packets is not yet supported (DRGN-23305).

* GAP

  * If the Peer Preferred Connection Parameters Characteristic (PPCP) contains "No
    specific values indication (0xFFFF)", application should not perform a peripheral
    initiated connection parameter update using PPCP. Otherwise invalid values will be
    used in ``L2CAP_CONNECTION_PARAMETER_UPDATE_REQ``. A workaround is to always specify
    the connection parameters in the ``sd_ble_gap_conn_param_update`` call (DRGN-15111).

  * The ``BLE_GAP_EVT_SEC_INFO_REQUEST`` event will not report the identity
    address of the peer to the application. A workaround is to do a mapping of the
    connection handle to the peer's identity address (DRGN-10340).

  * LE Secure Connections are not yet supported (DRGN-23305).

* GATT

  * ATT MTU size greater than 23 octets is not yet supported (DRGN-23305).

* GATTS

  * Queued Writes are not yet supported. Receiving the ``ATT_PREPARE_WRITE_REQ`` PDU
    will lead to assert (DRGN-23848).

* GATTC

  * The ``ble_gattc_service_t::uuid`` field is incorrectly populated in the
    ``BLE_GATTC_EVT_PRIM_SRVC_DISC_RSP`` event if
    ``sd_ble_gattc_primary_services_discover()`` or ``sd_ble_gattc_read()`` is
    called when a Primary Service Discovery by Service UUID is already ongoing.
    When the application has called
    ``sd_ble_gattc_primary_services_discover()``, it should wait for the
    ``BLE_GATTC_EVT_PRIM_SRVC_DISC_RSP`` event before calling
    ``sd_ble_gattc_primary_services_discover()`` or ``sd_ble_gattc_read()``
    (DRGN-11300).

* LL

  * If the application adds an all zeroes IRK with the
    ``sd_ble_gap_device_identities_set()``, it will be treated as a valid entry
    in the device identity list. An all zeroes IRK is invalid and must not be
    added (DRGN-9083).
